#!/bin/bash
# Git pre-commit hook: check for broken links with lychee

echo "Running lychee to check Markdown links in chapters/..."

# Run lychee and capture output and status
output=$(lychee chapters 2>&1)
status=$?

if [ $status -ne 0 ]; then
  echo "❌ Broken links found. Commit aborted."
  echo "$output"
  exit 1
else
  echo "✅ No broken links detected by lychee."
  exit 0
fi

